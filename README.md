# WYY

## 一、界面和基本功能

### 1.UI

实现了侧拉导航栏，底部导航栏，图片裁剪成圆形，搜索界面，音乐播放界面，mv播放界面，评论界面，歌词界面，排行榜界面，歌单界面，我的的界面。

### 2.功能

实现了歌单的上拉下滑更新，固定了部分activity只能竖直展示，实现了音乐播放，进度条控制播放进度，封面转动与停止，歌曲评论和歌词，播放上一首下一首，mv播放（可控制上下播放与暂停），音乐排行榜，navigationView的item的点击事件，banner的自动播放，圆形图标的点击事件，搜索功能（实现时时根据输入文字更新搜索列表），activity之间的转场动画。



## 二、环境与语言

Android studio、java

## 三、代码目录说明

### 1.adapter

adapter中就是对应圆形图标，banner，评论，mv，搜索，歌曲列表，排行榜，歌词，歌单的适配器。

### 2.classes

classes中就是对json数据解析后存放所需要的数据创建的类和为适配器创建的类。

### 3.Strings

Strings包中为所要用到的链接。

### 4.util

util包中包含自己封装的网络请求类HttpUtil和json数据解析类JsonUtil。

#### 4.1 JsonUtil

依次是解析歌单（网友精选碟），banner，ball界面上的小圆，解析歌单里面的歌的详情，解析音乐url，解析搜索大全，解析搜索关键字，排行榜，歌词，评论，解析mv封面，解析mv的链接。

## 四、常见问题及解决办法

1.在子线程内无法更新ui界面，可以使用Handel发送消息后更新，但常会出现内存泄漏的问题，需要弱引用或者runOnUiThread()回到主线程。

2.在recycleview更新中会出现无法更新当前页面，可以使用clear()清除之前的数据再更新。

3.在解析json数据的时候有些值返回null，要在适配器里进行判断做出调整，否则无法显示一片空白。

4.自定义的image有时候下载图片大小过小无法裁剪，可以自定义一个xml作为背景改变形状。

5.在适配器里实现activity转场设置时，构造方法里要加入activity对象，引入该对象。

## 五、引用的库

实现图片加载：com.github.bumptech.glide:glide:4.12.0
